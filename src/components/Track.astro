---
import { Image } from "astro:assets" 
import { IoPlay } from "react-icons/io5";


interface Props{
  title?:string
  artist?:string
  image:ImageMetadata
  song?:string
  id:string
}
const { title,artist,image,song,id } = Astro.props;
---

<li class="flex-[0_0_10rem] w-96 rounded-lg color-[rgba(var(--content),1)] duration-150 gap-2">
  <a class="flex flex-col rounded-lg color-[rgba(var(--content),1)] duration-150 gap-2" href={`/track/${id}`}>
    <Image src={image} alt="yoasobi song" class="object-fill aspect-square w-full rounded-md" transition:name={id}/>
    <h2 class="font-medium text-xl m-0 leading-5 ">
      {title?title:"Undead"}
    </h2>
    <span class="text-xs font-medium opacity-70">
      {artist?artist:"YOASOBI"}
    </span>
    <audio id="audioElement">
      <source src={song} type="audio/mpeg">
      Tu navegador no soporta el elemento de audio.
    </audio>
  </a>
  <button id="playButton" class="rounded-full bg-[rgba(var(--accent,1))] flex items-center justify-center w-7 h-7">
    <IoPlay className="w-5 h-5 ml-[0.15rem]"/>
  </button>
  <button id="pauseButton">Pausar</button>
</li>

<style>
  @media (hover:hover){
    li:hover{
    background-color: rgba(var(--bg-contrast),.4);
  }}
</style>
<script>

    // Obtenemos el elemento de audio y los botones
    const audioElement = document.getElementById("audioElement") as HTMLAudioElement;
    const playButton = document.getElementById("playButton");
    const pauseButton = document.getElementById("pauseButton");
    
    // Función para reproducir el audio
    playButton?.addEventListener("click", () => {
      audioElement.play();
    });

    // Función para pausar el audio
    pauseButton?.addEventListener("click", () => {
      audioElement.pause();
    });
</script>
